
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>fontai.io package &#8212; textfont-ai 1.0 documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/alabaster.css" />
    <link rel="stylesheet" type="text/css" href="_static/custom.css" />
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="fontai-io-package">
<h1>fontai.io package<a class="headerlink" href="#fontai-io-package" title="Permalink to this headline">¶</a></h1>
<div class="section" id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-fontai.io.formats">
<span id="fontai-io-formats-module"></span><h2>fontai.io.formats module<a class="headerlink" href="#module-fontai.io.formats" title="Permalink to this headline">¶</a></h2>
<p>This module contains classes that deal with encoding/decoding bytestreams from/to the data formats that act as the interface between pipeline stages and storage, and between different ML pipeline stages.</p>
<dl class="py class">
<dt class="sig sig-object py" id="fontai.io.formats.InMemoryFile">
<em class="property"><span class="pre">class</span> </em><span class="sig-name descname"><span class="pre">InMemoryFile</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filename</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">content</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">bytes</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#fontai.io.formats.InMemoryFile" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">pydantic.main.BaseModel</span></code></p>
<p>Wrapper class for retrieved file bytestreams</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="fontai.io.formats.InMemoryFile.content">
<span class="sig-name descname"><span class="pre">content</span></span><em class="property"><span class="pre">:</span> <span class="pre">bytes</span></em><a class="headerlink" href="#fontai.io.formats.InMemoryFile.content" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="fontai.io.formats.InMemoryFile.deserialise">
<span class="sig-name descname"><span class="pre">deserialise</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#fontai.io.formats.InMemoryFile.deserialise" title="Permalink to this definition">¶</a></dt>
<dd><p>Parse instance as the corresponding Python object such as a ZipFile or an ImageFont.truetype</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="fontai.io.formats.InMemoryFile.filename">
<span class="sig-name descname"><span class="pre">filename</span></span><em class="property"><span class="pre">:</span> <span class="pre">str</span></em><a class="headerlink" href="#fontai.io.formats.InMemoryFile.filename" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="fontai.io.formats.InMemoryFile.from_bytestream_path">
<em class="property"><span class="pre">classmethod</span> </em><span class="sig-name descname"><span class="pre">from_bytestream_path</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">bsp</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="#fontai.io.storage.BytestreamPath" title="fontai.io.storage.BytestreamPath"><span class="pre">fontai.io.storage.BytestreamPath</span></a></span></em><span class="sig-paren">)</span> &#x2192; <a class="reference internal" href="#fontai.io.formats.InMemoryFile" title="fontai.io.formats.InMemoryFile"><span class="pre">fontai.io.formats.InMemoryFile</span></a><a class="headerlink" href="#fontai.io.formats.InMemoryFile.from_bytestream_path" title="Permalink to this definition">¶</a></dt>
<dd><p>Instantiate from bytestream path</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>instantiated object</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#fontai.io.formats.InMemoryFile" title="fontai.io.formats.InMemoryFile">InMemoryFile</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="fontai.io.formats.InMemoryFile.from_file">
<em class="property"><span class="pre">classmethod</span> </em><span class="sig-name descname"><span class="pre">from_file</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filepath</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> &#x2192; <a class="reference internal" href="#fontai.io.formats.InMemoryFile" title="fontai.io.formats.InMemoryFile"><span class="pre">fontai.io.formats.InMemoryFile</span></a><a class="headerlink" href="#fontai.io.formats.InMemoryFile.from_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Instantiate from file path</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>filepath</strong> (<em>str</em>) – FIle path</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>instantiated object</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#fontai.io.formats.InMemoryFile" title="fontai.io.formats.InMemoryFile">InMemoryFile</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="fontai.io.formats.InMemoryFile.serialise">
<em class="property"><span class="pre">classmethod</span> </em><span class="sig-name descname"><span class="pre">serialise</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obj</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#fontai.io.formats.InMemoryFile.serialise" title="Permalink to this definition">¶</a></dt>
<dd><p>Serialises a Python object to an instance of InMemoryFile</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>obj</strong> (<em>t.Any</em>) – Python object</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Description</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#fontai.io.formats.InMemoryFile" title="fontai.io.formats.InMemoryFile">InMemoryFile</a></p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>TypeError</strong> – If passed object is not an instance of InMemoryFile</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="fontai.io.formats.InMemoryFile.to_format">
<span class="sig-name descname"><span class="pre">to_format</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">file_format</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="#fontai.io.formats.InMemoryFile" title="fontai.io.formats.InMemoryFile"><span class="pre">fontai.io.formats.InMemoryFile</span></a></span></em><span class="sig-paren">)</span> &#x2192; <a class="reference internal" href="#fontai.io.formats.InMemoryFile" title="fontai.io.formats.InMemoryFile"><span class="pre">fontai.io.formats.InMemoryFile</span></a><a class="headerlink" href="#fontai.io.formats.InMemoryFile.to_format" title="Permalink to this definition">¶</a></dt>
<dd><p>Cast instance as a different file type inehriting from InMemoryFile</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>file_format</strong> (<a class="reference internal" href="#fontai.io.formats.InMemoryFile" title="fontai.io.formats.InMemoryFile"><em>InMemoryFile</em></a>) – Target file type</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>cast file instance.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#fontai.io.formats.InMemoryFile" title="fontai.io.formats.InMemoryFile">InMemoryFile</a></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="fontai.io.formats.InMemoryFontfileHolder">
<em class="property"><span class="pre">class</span> </em><span class="sig-name descname"><span class="pre">InMemoryFontfileHolder</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filename</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">content</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">bytes</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#fontai.io.formats.InMemoryFontfileHolder" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#fontai.io.formats.InMemoryFile" title="fontai.io.formats.InMemoryFile"><code class="xref py py-class docutils literal notranslate"><span class="pre">fontai.io.formats.InMemoryFile</span></code></a></p>
<p>In-memory buffer class for ingested ttf or otf font files</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="fontai.io.formats.InMemoryFontfileHolder.content">
<span class="sig-name descname"><span class="pre">content</span></span><em class="property"><span class="pre">:</span> <span class="pre">bytes</span></em><a class="headerlink" href="#fontai.io.formats.InMemoryFontfileHolder.content" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="fontai.io.formats.InMemoryFontfileHolder.deserialise">
<span class="sig-name descname"><span class="pre">deserialise</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">font_size</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">int</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#fontai.io.formats.InMemoryFontfileHolder.deserialise" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>font_size</strong> (<em>int</em>) – </p>
</dd>
</dl>
<dl class="simple">
<dt>No Longer Returned:</dt><dd><p>font: A parsed font object.</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="fontai.io.formats.InMemoryFontfileHolder.filename">
<span class="sig-name descname"><span class="pre">filename</span></span><em class="property"><span class="pre">:</span> <span class="pre">str</span></em><a class="headerlink" href="#fontai.io.formats.InMemoryFontfileHolder.filename" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="fontai.io.formats.InMemoryFontfileHolder.serialise">
<span class="sig-name descname"><span class="pre">serialise</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">font</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">PIL.ImageFont.FreeTypeFont</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#fontai.io.formats.InMemoryFontfileHolder.serialise" title="Permalink to this definition">¶</a></dt>
<dd><p>Serialises a Python object to an instance of InMemoryFile</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>obj</strong> (<em>t.Any</em>) – Python object</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Description</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#fontai.io.formats.InMemoryFile" title="fontai.io.formats.InMemoryFile">InMemoryFile</a></p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>TypeError</strong> – If passed object is not an instance of InMemoryFile</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="fontai.io.formats.InMemoryZipBundler">
<em class="property"><span class="pre">class</span> </em><span class="sig-name descname"><span class="pre">InMemoryZipBundler</span></span><a class="headerlink" href="#fontai.io.formats.InMemoryZipBundler" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Class to fill a zipfile in memory before persisting it to storage.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="fontai.io.formats.InMemoryZipBundler.buffer">
<span class="sig-name descname"><span class="pre">buffer</span></span><a class="headerlink" href="#fontai.io.formats.InMemoryZipBundler.buffer" title="Permalink to this definition">¶</a></dt>
<dd><p>zip file’s buffer</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>BytesIO</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="fontai.io.formats.InMemoryZipBundler.n_files">
<span class="sig-name descname"><span class="pre">n_files</span></span><a class="headerlink" href="#fontai.io.formats.InMemoryZipBundler.n_files" title="Permalink to this definition">¶</a></dt>
<dd><p>number of files currently in the zip file</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="fontai.io.formats.InMemoryZipBundler.size">
<span class="sig-name descname"><span class="pre">size</span></span><a class="headerlink" href="#fontai.io.formats.InMemoryZipBundler.size" title="Permalink to this definition">¶</a></dt>
<dd><p>zip file’s size</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="fontai.io.formats.InMemoryZipBundler.zip_file">
<span class="sig-name descname"><span class="pre">zip_file</span></span><a class="headerlink" href="#fontai.io.formats.InMemoryZipBundler.zip_file" title="Permalink to this definition">¶</a></dt>
<dd><p>ZipFile instance wrapping the buffer</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>ZipFile</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="fontai.io.formats.InMemoryZipBundler.close">
<span class="sig-name descname"><span class="pre">close</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#fontai.io.formats.InMemoryZipBundler.close" title="Permalink to this definition">¶</a></dt>
<dd><p>Closes the zip file’s inner buffer</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="fontai.io.formats.InMemoryZipBundler.compress">
<span class="sig-name descname"><span class="pre">compress</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#fontai.io.formats.InMemoryZipBundler.compress" title="Permalink to this definition">¶</a></dt>
<dd><p>Compress and close zip file</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>self</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#fontai.io.formats.InMemoryZipBundler" title="fontai.io.formats.InMemoryZipBundler">InMemoryZipBundler</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="fontai.io.formats.InMemoryZipBundler.get_bytes">
<span class="sig-name descname"><span class="pre">get_bytes</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#fontai.io.formats.InMemoryZipBundler.get_bytes" title="Permalink to this definition">¶</a></dt>
<dd><p>Get zip file contents</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>contents</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>bytes</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="fontai.io.formats.InMemoryZipBundler.write">
<span class="sig-name descname"><span class="pre">write</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">file</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="#fontai.io.formats.InMemoryFile" title="fontai.io.formats.InMemoryFile"><span class="pre">fontai.io.formats.InMemoryFile</span></a></span></em><span class="sig-paren">)</span><a class="headerlink" href="#fontai.io.formats.InMemoryZipBundler.write" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a file to the open zip file</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>file</strong> (<a class="reference internal" href="#fontai.io.formats.InMemoryFile" title="fontai.io.formats.InMemoryFile"><em>InMemoryFile</em></a>) – file to be added</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="fontai.io.formats.InMemoryZipHolder">
<em class="property"><span class="pre">class</span> </em><span class="sig-name descname"><span class="pre">InMemoryZipHolder</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filename</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">content</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">bytes</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#fontai.io.formats.InMemoryZipHolder" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#fontai.io.formats.InMemoryFile" title="fontai.io.formats.InMemoryFile"><code class="xref py py-class docutils literal notranslate"><span class="pre">fontai.io.formats.InMemoryFile</span></code></a></p>
<p>In-memory buffer class for ingested zip bytestream</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="fontai.io.formats.InMemoryZipHolder.content">
<span class="sig-name descname"><span class="pre">content</span></span><em class="property"><span class="pre">:</span> <span class="pre">bytes</span></em><a class="headerlink" href="#fontai.io.formats.InMemoryZipHolder.content" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="fontai.io.formats.InMemoryZipHolder.deserialise">
<span class="sig-name descname"><span class="pre">deserialise</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#fontai.io.formats.InMemoryZipHolder.deserialise" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>An open ZipFile instance with the current instance’s contents</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>zipfile.ZipFile</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="fontai.io.formats.InMemoryZipHolder.filename">
<span class="sig-name descname"><span class="pre">filename</span></span><em class="property"><span class="pre">:</span> <span class="pre">str</span></em><a class="headerlink" href="#fontai.io.formats.InMemoryZipHolder.filename" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="fontai.io.formats.InMemoryZipHolder.serialise">
<em class="property"><span class="pre">classmethod</span> </em><span class="sig-name descname"><span class="pre">serialise</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obj</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">zipfile.ZipFile</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#fontai.io.formats.InMemoryZipHolder.serialise" title="Permalink to this definition">¶</a></dt>
<dd><p>Serialises a Python object to an instance of InMemoryFile</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>obj</strong> (<em>t.Any</em>) – Python object</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Description</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#fontai.io.formats.InMemoryFile" title="fontai.io.formats.InMemoryFile">InMemoryFile</a></p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>TypeError</strong> – If passed object is not an instance of InMemoryFile</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-fontai.io.readers">
<span id="fontai-io-readers-module"></span><h2>fontai.io.readers module<a class="headerlink" href="#module-fontai.io.readers" title="Permalink to this headline">¶</a></h2>
<p>This module provides the interfaces between ML pipeline stages and storage media for the purpose of reading input files. They relay on instances inheriting from BytestreamPath to list and retrieve available files as bytestream, that are then deserialised to specific data formats depending on the particular reader class.</p>
<dl class="py class">
<dt class="sig sig-object py" id="fontai.io.readers.ReaderClassFactory">
<em class="property"><span class="pre">class</span> </em><span class="sig-name descname"><span class="pre">ReaderClassFactory</span></span><a class="headerlink" href="#fontai.io.readers.ReaderClassFactory" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Factory class that returns the appropriate reader depending on the expected input file format.</p>
<dl class="py method">
<dt class="sig sig-object py" id="fontai.io.readers.ReaderClassFactory.get">
<span class="sig-name descname"><span class="pre">get</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; <span class="pre">type</span><a class="headerlink" href="#fontai.io.readers.ReaderClassFactory.get" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a reader type for instantiation at runtime.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>file_format</strong> (<a class="reference internal" href="#fontai.io.formats.InMemoryFile" title="fontai.io.formats.InMemoryFile"><em>InMemoryFile</em></a>) – Expected input file format.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="fontai.io.readers.TfrReader">
<em class="property"><span class="pre">class</span> </em><span class="sig-name descname"><span class="pre">TfrReader</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">input_path</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#fontai.io.readers.TfrReader" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">fontai.io.readers.BatchReader</span></code></p>
<p>Class that reads a sequence of Tensorflow Record files as an instance of TFRecordDataset</p>
<dl class="py method">
<dt class="sig sig-object py" id="fontai.io.readers.TfrReader.get_files">
<span class="sig-name descname"><span class="pre">get_files</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#fontai.io.readers.TfrReader.get_files" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a generator for the sequence of input files</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="fontai.io.readers.ZipReader">
<em class="property"><span class="pre">class</span> </em><span class="sig-name descname"><span class="pre">ZipReader</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">input_path</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#fontai.io.readers.ZipReader" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">fontai.io.readers.BatchReader</span></code></p>
<p>Class that reads a sequence of zip files</p>
<dl class="py method">
<dt class="sig sig-object py" id="fontai.io.readers.ZipReader.get_files">
<span class="sig-name descname"><span class="pre">get_files</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#fontai.io.readers.ZipReader.get_files" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a generator for the sequence of input files</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-fontai.io.records">
<span id="fontai-io-records-module"></span><h2>fontai.io.records module<a class="headerlink" href="#module-fontai.io.records" title="Permalink to this headline">¶</a></h2>
<p>This module contains classes that can be serialised/deserialised to/from Tensorflow record files; they are used by the prediction stage for both training and scoring</p>
<dl class="py class">
<dt class="sig sig-object py" id="fontai.io.records.LabeledChar">
<em class="property"><span class="pre">class</span> </em><span class="sig-name descname"><span class="pre">LabeledChar</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">features</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">numpy.ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">label</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fontname</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#fontai.io.records.LabeledChar" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#fontai.io.records.TfrWritable" title="fontai.io.records.TfrWritable"><code class="xref py py-class docutils literal notranslate"><span class="pre">fontai.io.records.TfrWritable</span></code></a>, <a class="reference internal" href="#fontai.io.records.ModelWithAnyType" title="fontai.io.records.ModelWithAnyType"><code class="xref py py-class docutils literal notranslate"><span class="pre">fontai.io.records.ModelWithAnyType</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="fontai.io.records.LabeledChar.add_score">
<span class="sig-name descname"><span class="pre">add_score</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">score</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">numpy.ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">charset_tensor</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">numpy.ndarray</span></span></em><span class="sig-paren">)</span> &#x2192; <a class="reference internal" href="#fontai.io.records.TfrWritable" title="fontai.io.records.TfrWritable"><span class="pre">fontai.io.records.TfrWritable</span></a><a class="headerlink" href="#fontai.io.records.LabeledChar.add_score" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds a model’s score and return the appropriate record instance</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>score</strong> (<em>Tensor</em>) – Model score</p></li>
<li><p><strong>charset</strong> (<em>Tensor</em>) – charset used by the scoring model</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>scored record instance</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#fontai.io.records.TfrWritable" title="fontai.io.records.TfrWritable">TfrWritable</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="fontai.io.records.LabeledChar.features">
<span class="sig-name descname"><span class="pre">features</span></span><em class="property"><span class="pre">:</span> <span class="pre">numpy.ndarray</span></em><a class="headerlink" href="#fontai.io.records.LabeledChar.features" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="fontai.io.records.LabeledChar.filter_charset_for_scoring">
<em class="property"><span class="pre">classmethod</span> </em><span class="sig-name descname"><span class="pre">filter_charset_for_scoring</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dataset</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">tensorflow.python.data.ops.readers.TFRecordDatasetV2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">charset_tensor</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">numpy.ndarray</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#fontai.io.records.LabeledChar.filter_charset_for_scoring" title="Permalink to this definition">¶</a></dt>
<dd><p>This function is needed because filtering by character requires different logic for individual char images and for entire fonts.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dataset</strong> (<em>TFRecordDataset</em>) – input dataset</p></li>
<li><p><strong>charset_tensor</strong> (<em>ndarray</em>) – tensor with a single char element per charset element</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="fontai.io.records.LabeledChar.fontname">
<span class="sig-name descname"><span class="pre">fontname</span></span><em class="property"><span class="pre">:</span> <span class="pre">str</span></em><a class="headerlink" href="#fontai.io.records.LabeledChar.fontname" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="fontai.io.records.LabeledChar.from_scored_batch">
<em class="property"><span class="pre">classmethod</span> </em><span class="sig-name descname"><span class="pre">from_scored_batch</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">features</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">numpy.ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">labels</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">numpy.ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fontnames</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">numpy.ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scores</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">numpy.ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">charset_tensor</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">numpy.ndarray</span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">Generator</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#fontai.io.records.LabeledChar" title="fontai.io.records.LabeledChar"><span class="pre">fontai.io.records.LabeledChar</span></a><span class="p"><span class="pre">,</span> </span><span class="pre">None</span><span class="p"><span class="pre">,</span> </span><span class="pre">None</span><span class="p"><span class="pre">]</span></span><a class="headerlink" href="#fontai.io.records.LabeledChar.from_scored_batch" title="Permalink to this definition">¶</a></dt>
<dd><p>Maps a batch of scored features and associated objects to a generator of TfrWritable instances. This method is necessary because labeled chars and labeled fonts differ in shape, and logic for mapping scored batches to records is different for each of them.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>features</strong> (<em>ndarray</em>) – batch features; they must be preprocessed for scoring, which usually means they are in unit scale and are of type float32.</p></li>
<li><p><strong>label</strong> (<em>ndarray</em>) – batch labels</p></li>
<li><p><strong>fontname</strong> (<em>t.Union</em><em>[</em><em>str</em><em>, </em><em>ndarray</em><em>]</em>) – batch fontnames</p></li>
<li><p><strong>scores</strong> (<em>ndarray</em>) – batch scores</p></li>
<li><p><strong>charset_tensor</strong> (<em>ndarray</em>) – tensor with a single char element per charset element</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Generator of formatted records</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>t.Generator[<a class="reference internal" href="#fontai.io.records.TfrWritable" title="fontai.io.records.TfrWritable">TfrWritable</a>, None, None]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="fontai.io.records.LabeledChar.get_training_parser">
<em class="property"><span class="pre">classmethod</span> </em><span class="sig-name descname"><span class="pre">get_training_parser</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">charset_tensor</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">tensorflow.python.framework.ops.Tensor</span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">Callable</span><a class="headerlink" href="#fontai.io.records.LabeledChar.get_training_parser" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a function that maps partially parsed objects as outputted by parse_bytes_dict to a (features, label) tuple for training consumption</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>charset_tensor</strong> (<em>Tensor</em>) – tensor fo valid characters</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Parser function</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>t.Callable</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="fontai.io.records.LabeledChar.label">
<span class="sig-name descname"><span class="pre">label</span></span><em class="property"><span class="pre">:</span> <span class="pre">str</span></em><a class="headerlink" href="#fontai.io.records.LabeledChar.label" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="fontai.io.records.LabeledChar.parse_bytes_dict">
<em class="property"><span class="pre">classmethod</span> </em><span class="sig-name descname"><span class="pre">parse_bytes_dict</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">record</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#fontai.io.records.LabeledChar.parse_bytes_dict" title="Permalink to this definition">¶</a></dt>
<dd><p>Performs basic parsing of deserialised features and returns dict with the same keys as the tfr schema’s ordered dict</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>record</strong> (<em>tf.train.TFExample</em>) – Input record</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Output dictionary</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>t.Dict</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="fontai.io.records.LabeledChar.to_bytes_dict">
<span class="sig-name descname"><span class="pre">to_bytes_dict</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; <span class="pre">Dict</span><a class="headerlink" href="#fontai.io.records.LabeledChar.to_bytes_dict" title="Permalink to this definition">¶</a></dt>
<dd><p>Maps an object inheriting from this class to a TF record compatible format</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>dictionary with encoded features that will be stored into a TF record.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>t.Dict</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="fontai.io.records.LabeledFont">
<em class="property"><span class="pre">class</span> </em><span class="sig-name descname"><span class="pre">LabeledFont</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">features</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">numpy.ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">label</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">numpy.ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fontname</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#fontai.io.records.LabeledFont" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#fontai.io.records.TfrWritable" title="fontai.io.records.TfrWritable"><code class="xref py py-class docutils literal notranslate"><span class="pre">fontai.io.records.TfrWritable</span></code></a>, <a class="reference internal" href="#fontai.io.records.ModelWithAnyType" title="fontai.io.records.ModelWithAnyType"><code class="xref py py-class docutils literal notranslate"><span class="pre">fontai.io.records.ModelWithAnyType</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="fontai.io.records.LabeledFont.add_score">
<span class="sig-name descname"><span class="pre">add_score</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">score</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">numpy.ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">charset_tensor</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">numpy.ndarray</span></span></em><span class="sig-paren">)</span> &#x2192; <a class="reference internal" href="#fontai.io.records.TfrWritable" title="fontai.io.records.TfrWritable"><span class="pre">fontai.io.records.TfrWritable</span></a><a class="headerlink" href="#fontai.io.records.LabeledFont.add_score" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds a model’s score and return the appropriate record instance</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>score</strong> (<em>Tensor</em>) – Model score</p></li>
<li><p><strong>charset</strong> (<em>Tensor</em>) – charset used by the scoring model</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>scored record instance</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#fontai.io.records.TfrWritable" title="fontai.io.records.TfrWritable">TfrWritable</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="fontai.io.records.LabeledFont.features">
<span class="sig-name descname"><span class="pre">features</span></span><em class="property"><span class="pre">:</span> <span class="pre">numpy.ndarray</span></em><a class="headerlink" href="#fontai.io.records.LabeledFont.features" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="fontai.io.records.LabeledFont.filter_charset_for_scoring">
<em class="property"><span class="pre">classmethod</span> </em><span class="sig-name descname"><span class="pre">filter_charset_for_scoring</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dataset</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">tensorflow.python.data.ops.readers.TFRecordDatasetV2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">charset_tensor</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">numpy.ndarray</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#fontai.io.records.LabeledFont.filter_charset_for_scoring" title="Permalink to this definition">¶</a></dt>
<dd><p>This function is needed because filtering by character requires different logic for individual char images and for entire fonts.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dataset</strong> (<em>TFRecordDataset</em>) – input dataset</p></li>
<li><p><strong>charset_tensor</strong> (<em>ndarray</em>) – tensor with a single char element per charset element</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="fontai.io.records.LabeledFont.fontname">
<span class="sig-name descname"><span class="pre">fontname</span></span><em class="property"><span class="pre">:</span> <span class="pre">str</span></em><a class="headerlink" href="#fontai.io.records.LabeledFont.fontname" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="fontai.io.records.LabeledFont.from_scored_batch">
<em class="property"><span class="pre">classmethod</span> </em><span class="sig-name descname"><span class="pre">from_scored_batch</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">features</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">numpy.ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">labels</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">numpy.ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fontnames</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">numpy.ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scores</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">numpy.ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">charset_tensor</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">numpy.ndarray</span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">Generator</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#fontai.io.records.LabeledChar" title="fontai.io.records.LabeledChar"><span class="pre">fontai.io.records.LabeledChar</span></a><span class="p"><span class="pre">,</span> </span><span class="pre">None</span><span class="p"><span class="pre">,</span> </span><span class="pre">None</span><span class="p"><span class="pre">]</span></span><a class="headerlink" href="#fontai.io.records.LabeledFont.from_scored_batch" title="Permalink to this definition">¶</a></dt>
<dd><p>Maps a batch of scored features and associated objects to a generator of TfrWritable instances. This method is necessary because labeled chars and labeled fonts differ in shape, and logic for mapping scored batches to records is different for each of them.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>features</strong> (<em>ndarray</em>) – batch features; they must be preprocessed for scoring, which usually means they are in unit scale and are of type float32.</p></li>
<li><p><strong>label</strong> (<em>ndarray</em>) – batch labels</p></li>
<li><p><strong>fontname</strong> (<em>t.Union</em><em>[</em><em>str</em><em>, </em><em>ndarray</em><em>]</em>) – batch fontnames</p></li>
<li><p><strong>scores</strong> (<em>ndarray</em>) – batch scores</p></li>
<li><p><strong>charset_tensor</strong> (<em>ndarray</em>) – tensor with a single char element per charset element</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Generator of formatted records</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>t.Generator[<a class="reference internal" href="#fontai.io.records.TfrWritable" title="fontai.io.records.TfrWritable">TfrWritable</a>, None, None]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="fontai.io.records.LabeledFont.get_training_parser">
<em class="property"><span class="pre">classmethod</span> </em><span class="sig-name descname"><span class="pre">get_training_parser</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">charset_tensor</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">tensorflow.python.framework.ops.Tensor</span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">Callable</span><a class="headerlink" href="#fontai.io.records.LabeledFont.get_training_parser" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a function that maps partially parsed objects as outputted by parse_bytes_dict to a (features, label) tuple for training consumption</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>charset_tensor</strong> (<em>Tensor</em>) – tensor fo valid characters</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Parser function</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>t.Callable</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="fontai.io.records.LabeledFont.label">
<span class="sig-name descname"><span class="pre">label</span></span><em class="property"><span class="pre">:</span> <span class="pre">numpy.ndarray</span></em><a class="headerlink" href="#fontai.io.records.LabeledFont.label" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="fontai.io.records.LabeledFont.parse_bytes_dict">
<em class="property"><span class="pre">classmethod</span> </em><span class="sig-name descname"><span class="pre">parse_bytes_dict</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">record</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#fontai.io.records.LabeledFont.parse_bytes_dict" title="Permalink to this definition">¶</a></dt>
<dd><p>Performs basic parsing of deserialised features and returns dict with the same keys as the tfr schema’s ordered dict</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>record</strong> (<em>tf.train.TFExample</em>) – Input record</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Output dictionary</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>t.Dict</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="fontai.io.records.LabeledFont.to_bytes_dict">
<span class="sig-name descname"><span class="pre">to_bytes_dict</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; <span class="pre">Dict</span><a class="headerlink" href="#fontai.io.records.LabeledFont.to_bytes_dict" title="Permalink to this definition">¶</a></dt>
<dd><p>Maps an object inheriting from this class to a TF record compatible format</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>dictionary with encoded features that will be stored into a TF record.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>t.Dict</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="fontai.io.records.ModelWithAnyType">
<em class="property"><span class="pre">class</span> </em><span class="sig-name descname"><span class="pre">ModelWithAnyType</span></span><a class="headerlink" href="#fontai.io.records.ModelWithAnyType" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">pydantic.main.BaseModel</span></code></p>
<dl class="py class">
<dt class="sig sig-object py" id="fontai.io.records.ModelWithAnyType.Config">
<em class="property"><span class="pre">class</span> </em><span class="sig-name descname"><span class="pre">Config</span></span><a class="headerlink" href="#fontai.io.records.ModelWithAnyType.Config" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<dl class="py attribute">
<dt class="sig sig-object py" id="fontai.io.records.ModelWithAnyType.Config.arbitrary_types_allowed">
<span class="sig-name descname"><span class="pre">arbitrary_types_allowed</span></span><em class="property"> <span class="pre">=</span> <span class="pre">True</span></em><a class="headerlink" href="#fontai.io.records.ModelWithAnyType.Config.arbitrary_types_allowed" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="fontai.io.records.ScoredLabeledChar">
<span class="sig-name descname"><span class="pre">ScoredLabeledChar</span></span><a class="headerlink" href="#fontai.io.records.ScoredLabeledChar" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <code class="xref py py-class docutils literal notranslate"><span class="pre">fontai.io.records.ScoredRecordFactory.create.&lt;locals&gt;.ScoredRecord</span></code></p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="fontai.io.records.ScoredLabeledFont">
<span class="sig-name descname"><span class="pre">ScoredLabeledFont</span></span><a class="headerlink" href="#fontai.io.records.ScoredLabeledFont" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <code class="xref py py-class docutils literal notranslate"><span class="pre">fontai.io.records.ScoredRecordFactory.create.&lt;locals&gt;.ScoredRecord</span></code></p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="fontai.io.records.ScoredRecordFactory">
<em class="property"><span class="pre">class</span> </em><span class="sig-name descname"><span class="pre">ScoredRecordFactory</span></span><a class="headerlink" href="#fontai.io.records.ScoredRecordFactory" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Creates classes for scored TfrWritable records</p>
<dl class="py method">
<dt class="sig sig-object py" id="fontai.io.records.ScoredRecordFactory.create">
<em class="property"><span class="pre">classmethod</span> </em><span class="sig-name descname"><span class="pre">create</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">T</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">type</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#fontai.io.records.ScoredRecordFactory.create" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a scored record’s class</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>T</strong> (<em>type</em>) – Subclass of TfrWritable</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>scored record class</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#fontai.io.records.TfrWritable" title="fontai.io.records.TfrWritable">TfrWritable</a></p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>TypeError</strong> – </p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="fontai.io.records.TfrWritable">
<em class="property"><span class="pre">class</span> </em><span class="sig-name descname"><span class="pre">TfrWritable</span></span><a class="headerlink" href="#fontai.io.records.TfrWritable" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">abc.ABC</span></code></p>
<p>Class that provides Tensorflow record’s encoding and decoding logic for downstream data formats used by the package</p>
<dl class="py method">
<dt class="sig sig-object py" id="fontai.io.records.TfrWritable.add_score">
<span class="sig-name descname"><span class="pre">add_score</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">score</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">tensorflow.python.framework.ops.Tensor</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">charset_tensor</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">tensorflow.python.framework.ops.Tensor</span></span></em><span class="sig-paren">)</span> &#x2192; <a class="reference internal" href="#fontai.io.records.TfrWritable" title="fontai.io.records.TfrWritable"><span class="pre">fontai.io.records.TfrWritable</span></a><a class="headerlink" href="#fontai.io.records.TfrWritable.add_score" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds a model’s score and return the appropriate record instance</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>score</strong> (<em>Tensor</em>) – Model score</p></li>
<li><p><strong>charset</strong> (<em>Tensor</em>) – charset used by the scoring model</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>scored record instance</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#fontai.io.records.TfrWritable" title="fontai.io.records.TfrWritable">TfrWritable</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="fontai.io.records.TfrWritable.array_to_bytes">
<em class="property"><span class="pre">classmethod</span> </em><span class="sig-name descname"><span class="pre">array_to_bytes</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">tensorflow.python.framework.ops.Tensor</span><span class="p"><span class="pre">,</span> </span><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dtype</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">type</span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">bytes</span><a class="headerlink" href="#fontai.io.records.TfrWritable.array_to_bytes" title="Permalink to this definition">¶</a></dt>
<dd><p>Converts an array, either from numpy or Tensorflow, to a stream of bytes to be serialized</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>x</strong> (<em>t.Union</em><em>[</em><em>Tensor</em><em>, </em><em>ndarray</em><em>]</em>) – Input array</p></li>
<li><p><strong>dtype</strong> – type of returned tensor</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>serialized array</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>bytes</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="fontai.io.records.TfrWritable.bytes_feature">
<em class="property"><span class="pre">classmethod</span> </em><span class="sig-name descname"><span class="pre">bytes_feature</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">bytes</span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">tensorflow.core.example.feature_pb2.Feature</span><a class="headerlink" href="#fontai.io.records.TfrWritable.bytes_feature" title="Permalink to this definition">¶</a></dt>
<dd><p>Maps a bytestream to a TF Feature instance</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>value</strong> (<em>bytes</em>) – bytes to encode</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>encoded value</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>TFFeature</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="fontai.io.records.TfrWritable.filter_charset_for_scoring">
<em class="property"><span class="pre">classmethod</span> </em><span class="sig-name descname"><span class="pre">filter_charset_for_scoring</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dataset</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">tensorflow.python.data.ops.readers.TFRecordDatasetV2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">charset_tensor</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">numpy.ndarray</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#fontai.io.records.TfrWritable.filter_charset_for_scoring" title="Permalink to this definition">¶</a></dt>
<dd><p>This function is needed because filtering by character requires different logic for individual char images and for entire fonts.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dataset</strong> (<em>TFRecordDataset</em>) – input dataset</p></li>
<li><p><strong>charset_tensor</strong> (<em>ndarray</em>) – tensor with a single char element per charset element</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="fontai.io.records.TfrWritable.from_parsed_bytes_dict">
<em class="property"><span class="pre">classmethod</span> </em><span class="sig-name descname"><span class="pre">from_parsed_bytes_dict</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">kwargs</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Dict</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#fontai.io.records.TfrWritable.from_parsed_bytes_dict" title="Permalink to this definition">¶</a></dt>
<dd><p>Instantiate from a parsed bytes dict extracted from a Tensorflow record file</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>kwargs</strong> (<em>t.Dict</em>) – Parsed dictionary</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>TfrWritable</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="fontai.io.records.TfrWritable.from_scored_batch">
<em class="property"><span class="pre">classmethod</span> </em><span class="sig-name descname"><span class="pre">from_scored_batch</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">features</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">numpy.ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">label</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">numpy.ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fontname</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span> </span><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scores</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">numpy.ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">charset_tensor</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">numpy.ndarray</span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">Generator</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#fontai.io.records.TfrWritable" title="fontai.io.records.TfrWritable"><span class="pre">fontai.io.records.TfrWritable</span></a><span class="p"><span class="pre">,</span> </span><span class="pre">None</span><span class="p"><span class="pre">,</span> </span><span class="pre">None</span><span class="p"><span class="pre">]</span></span><a class="headerlink" href="#fontai.io.records.TfrWritable.from_scored_batch" title="Permalink to this definition">¶</a></dt>
<dd><p>Maps a batch of scored features and associated objects to a generator of TfrWritable instances. This method is necessary because labeled chars and labeled fonts differ in shape, and logic for mapping scored batches to records is different for each of them.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>features</strong> (<em>ndarray</em>) – batch features; they must be preprocessed for scoring, which usually means they are in unit scale and are of type float32.</p></li>
<li><p><strong>label</strong> (<em>ndarray</em>) – batch labels</p></li>
<li><p><strong>fontname</strong> (<em>t.Union</em><em>[</em><em>str</em><em>, </em><em>ndarray</em><em>]</em>) – batch fontnames</p></li>
<li><p><strong>scores</strong> (<em>ndarray</em>) – batch scores</p></li>
<li><p><strong>charset_tensor</strong> (<em>ndarray</em>) – tensor with a single char element per charset element</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Generator of formatted records</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>t.Generator[<a class="reference internal" href="#fontai.io.records.TfrWritable" title="fontai.io.records.TfrWritable">TfrWritable</a>, None, None]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="fontai.io.records.TfrWritable.from_tf_example">
<em class="property"><span class="pre">classmethod</span> </em><span class="sig-name descname"><span class="pre">from_tf_example</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">example</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">tensorflow.python.framework.ops.Tensor</span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">Dict</span><a class="headerlink" href="#fontai.io.records.TfrWritable.from_tf_example" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates an instance by deserialising a TF record using the class schema</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>example</strong> (<em>TFExample</em>) – example TF example</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>deserialised TfrWritable instance</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#fontai.io.records.TfrWritable" title="fontai.io.records.TfrWritable">TfrWritable</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="fontai.io.records.TfrWritable.get_training_parser">
<em class="property"><span class="pre">abstract</span> <span class="pre">classmethod</span> </em><span class="sig-name descname"><span class="pre">get_training_parser</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">charset_tensor</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">tensorflow.python.framework.ops.Tensor</span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">Callable</span><a class="headerlink" href="#fontai.io.records.TfrWritable.get_training_parser" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a function that maps partially parsed objects as outputted by parse_bytes_dict to a (features, label) tuple for training consumption</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>charset_tensor</strong> (<em>Tensor</em>) – tensor fo valid characters</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Parser function</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>t.Callable</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="fontai.io.records.TfrWritable.img_to_png_bytes">
<em class="property"><span class="pre">classmethod</span> </em><span class="sig-name descname"><span class="pre">img_to_png_bytes</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">img</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#fontai.io.records.TfrWritable.img_to_png_bytes" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="fontai.io.records.TfrWritable.parse_bytes_dict">
<em class="property"><span class="pre">abstract</span> <span class="pre">classmethod</span> </em><span class="sig-name descname"><span class="pre">parse_bytes_dict</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">record</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#fontai.io.records.TfrWritable.parse_bytes_dict" title="Permalink to this definition">¶</a></dt>
<dd><p>Performs basic parsing of deserialised features and returns dict with the same keys as the tfr schema’s ordered dict</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>record</strong> (<em>tf.train.TFExample</em>) – Input record</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Output dictionary</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>t.Dict</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="fontai.io.records.TfrWritable.tensor_to_numpy">
<em class="property"><span class="pre">classmethod</span> </em><span class="sig-name descname"><span class="pre">tensor_to_numpy</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">tensorflow.python.framework.ops.Tensor</span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">numpy.ndarray</span><a class="headerlink" href="#fontai.io.records.TfrWritable.tensor_to_numpy" title="Permalink to this definition">¶</a></dt>
<dd><p>Converts Tensor to numpy array</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>x</strong> (<em>Tensor</em>) – Input tensor</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>numpy array</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>ndarray</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="fontai.io.records.TfrWritable.to_bytes_dict">
<em class="property"><span class="pre">abstract</span> <span class="pre">classmethod</span> </em><span class="sig-name descname"><span class="pre">to_bytes_dict</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; <span class="pre">tensorflow.core.example.feature_pb2.Feature</span><a class="headerlink" href="#fontai.io.records.TfrWritable.to_bytes_dict" title="Permalink to this definition">¶</a></dt>
<dd><p>Maps an object inheriting from this class to a TF record compatible format</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>dictionary with encoded features that will be stored into a TF record.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>t.Dict</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="fontai.io.records.TfrWritable.to_tf_example">
<span class="sig-name descname"><span class="pre">to_tf_example</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#fontai.io.records.TfrWritable.to_tf_example" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a Tensorflow example instance encoding the instance’s contents</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-fontai.io.scrappers">
<span id="fontai-io-scrappers-module"></span><h2>fontai.io.scrappers module<a class="headerlink" href="#module-fontai.io.scrappers" title="Permalink to this headline">¶</a></h2>
<p>This module contains logic that was used to scrape three font file sources: google, 1001fonts.com and dafont.com. As of May 2021 at least one of those sites have changed their url sources and so, some of these classes might not work anymore, and some work might be required to scrape the files again.</p>
<dl class="py class">
<dt class="sig sig-object py" id="fontai.io.scrappers.DafontsFileScrapper">
<em class="property"><span class="pre">class</span> </em><span class="sig-name descname"><span class="pre">DafontsFileScrapper</span></span><a class="headerlink" href="#fontai.io.scrappers.DafontsFileScrapper" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">fontai.io.scrappers.Scrapper</span></code></p>
<p>Retrieves font files from www.dafont.com</p>
<dl class="py method">
<dt class="sig sig-object py" id="fontai.io.scrappers.DafontsFileScrapper.get_source_urls">
<span class="sig-name descname"><span class="pre">get_source_urls</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#fontai.io.scrappers.DafontsFileScrapper.get_source_urls" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a generator of string objects pointing to each scrappable URL</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="fontai.io.scrappers.FreeFontsFileScrapper">
<em class="property"><span class="pre">class</span> </em><span class="sig-name descname"><span class="pre">FreeFontsFileScrapper</span></span><a class="headerlink" href="#fontai.io.scrappers.FreeFontsFileScrapper" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">fontai.io.scrappers.Scrapper</span></code></p>
<p>Retrieves font files from www.1001freefonts.com</p>
<dl class="py method">
<dt class="sig sig-object py" id="fontai.io.scrappers.FreeFontsFileScrapper.get_source_urls">
<span class="sig-name descname"><span class="pre">get_source_urls</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#fontai.io.scrappers.FreeFontsFileScrapper.get_source_urls" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a generator of string objects pointing to each scrappable URL</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="fontai.io.scrappers.GoogleFontsScrapper">
<em class="property"><span class="pre">class</span> </em><span class="sig-name descname"><span class="pre">GoogleFontsScrapper</span></span><a class="headerlink" href="#fontai.io.scrappers.GoogleFontsScrapper" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">fontai.io.scrappers.Scrapper</span></code></p>
<p>Retrieves the main zip file from Google fonts repository</p>
<dl class="py method">
<dt class="sig sig-object py" id="fontai.io.scrappers.GoogleFontsScrapper.get_source_urls">
<span class="sig-name descname"><span class="pre">get_source_urls</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#fontai.io.scrappers.GoogleFontsScrapper.get_source_urls" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a generator of string objects pointing to each scrappable URL</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-fontai.io.storage">
<span id="fontai-io-storage-module"></span><h2>fontai.io.storage module<a class="headerlink" href="#module-fontai.io.storage" title="Permalink to this headline">¶</a></h2>
<p>This module provides an abstraction fo the storage layer in order to read or write bytestreams to different media. Currently, read/writes are supported for local storage and GCS, and reads are also supported for URLs</p>
<dl class="py class">
<dt class="sig sig-object py" id="fontai.io.storage.BytestreamHandler">
<em class="property"><span class="pre">class</span> </em><span class="sig-name descname"><span class="pre">BytestreamHandler</span></span><a class="headerlink" href="#fontai.io.storage.BytestreamHandler" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">abc.ABC</span></code></p>
<p>This class provides an interface to underlying storage media</p>
<dl class="py method">
<dt class="sig sig-object py" id="fontai.io.storage.BytestreamHandler.list_sources">
<em class="property"><span class="pre">abstract</span> </em><span class="sig-name descname"><span class="pre">list_sources</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">Generator</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span> </span><span class="pre">None</span><span class="p"><span class="pre">,</span> </span><span class="pre">None</span><span class="p"><span class="pre">]</span></span><a class="headerlink" href="#fontai.io.storage.BytestreamHandler.list_sources" title="Permalink to this definition">¶</a></dt>
<dd><p>List files in the folder that path points to</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>path</strong> (<em>str</em>) – Target folder</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A generator containing string paths to all sources inside target folder</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="fontai.io.storage.BytestreamHandler.read">
<em class="property"><span class="pre">abstract</span> </em><span class="sig-name descname"><span class="pre">read</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">bytes</span><a class="headerlink" href="#fontai.io.storage.BytestreamHandler.read" title="Permalink to this definition">¶</a></dt>
<dd><p>Reads the byte contents from a file</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>path</strong> (<em>str</em>) – path to file</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>bytes object</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="fontai.io.storage.BytestreamHandler.write">
<em class="property"><span class="pre">abstract</span> </em><span class="sig-name descname"><span class="pre">write</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">content</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">bytes</span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">None</span><a class="headerlink" href="#fontai.io.storage.BytestreamHandler.write" title="Permalink to this definition">¶</a></dt>
<dd><p>Writes a bytestream to storage</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>path</strong> (<em>str</em>) – Description</p></li>
<li><p><strong>content</strong> (<em>bytes</em>) – Description</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="fontai.io.storage.BytestreamHandlerFactory">
<em class="property"><span class="pre">class</span> </em><span class="sig-name descname"><span class="pre">BytestreamHandlerFactory</span></span><a class="headerlink" href="#fontai.io.storage.BytestreamHandlerFactory" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Factory method that determines the appropriate file handler class based on the string path</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="fontai.io.storage.BytestreamHandlerFactory.allowed_prefixes">
<span class="sig-name descname"><span class="pre">allowed_prefixes</span></span><em class="property"> <span class="pre">=</span> <span class="pre">{'gs://':</span> <span class="pre">&lt;class</span> <span class="pre">'fontai.io.storage.GcsBytestreamHandler'&gt;,</span> <span class="pre">'http://':</span> <span class="pre">&lt;class</span> <span class="pre">'fontai.io.storage.UrlBytestreamHandler'&gt;,</span> <span class="pre">'https://':</span> <span class="pre">&lt;class</span> <span class="pre">'fontai.io.storage.UrlBytestreamHandler'&gt;}</span></em><a class="headerlink" href="#fontai.io.storage.BytestreamHandlerFactory.allowed_prefixes" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="fontai.io.storage.BytestreamHandlerFactory.create">
<em class="property"><span class="pre">classmethod</span> </em><span class="sig-name descname"><span class="pre">create</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#fontai.io.storage.BytestreamHandlerFactory.create" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates an appropriate BystreamHandler instance for the storage medium referenced in path; defaults to local storage if no match is found for remote storage media.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>path</strong> (<em>str</em>) – Path to storage location</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>storage interface for the matched storage medium.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#fontai.io.storage.BytestreamHandler" title="fontai.io.storage.BytestreamHandler">BytestreamHandler</a></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="fontai.io.storage.BytestreamPath">
<em class="property"><span class="pre">class</span> </em><span class="sig-name descname"><span class="pre">BytestreamPath</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">source_str</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#fontai.io.storage.BytestreamPath" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Data reader/writer class that abstracts the underlying storage location. Supports local and GCS storage and downloadable URLs</p>
<dl class="py method">
<dt class="sig sig-object py" id="fontai.io.storage.BytestreamPath.extend_url_path">
<span class="sig-name descname"><span class="pre">extend_url_path</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">suffix</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> &#x2192; <a class="reference internal" href="#fontai.io.storage.BytestreamPath" title="fontai.io.storage.BytestreamPath"><span class="pre">fontai.io.storage.BytestreamPath</span></a><a class="headerlink" href="#fontai.io.storage.BytestreamPath.extend_url_path" title="Permalink to this definition">¶</a></dt>
<dd><p>Appends a suffix to the instance’s storage path</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>suffix</strong> (<em>str</em>) – suffix. Usually a filename.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>BytestreamPath pointing to the suffixed storage path</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#fontai.io.storage.BytestreamPath" title="fontai.io.storage.BytestreamPath">BytestreamPath</a></p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>ValueError</strong> – If no remote storage is matched to the instance’s path</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="fontai.io.storage.BytestreamPath.filename">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">filename</span></span><a class="headerlink" href="#fontai.io.storage.BytestreamPath.filename" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="fontai.io.storage.BytestreamPath.is_url">
<span class="sig-name descname"><span class="pre">is_url</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#fontai.io.storage.BytestreamPath.is_url" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a boolean</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="fontai.io.storage.BytestreamPath.list_sources">
<span class="sig-name descname"><span class="pre">list_sources</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; <span class="pre">Generator</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#fontai.io.storage.BytestreamPath" title="fontai.io.storage.BytestreamPath"><span class="pre">fontai.io.storage.BytestreamPath</span></a><span class="p"><span class="pre">,</span> </span><span class="pre">None</span><span class="p"><span class="pre">,</span> </span><span class="pre">None</span><span class="p"><span class="pre">]</span></span><a class="headerlink" href="#fontai.io.storage.BytestreamPath.list_sources" title="Permalink to this definition">¶</a></dt>
<dd><p>List files (but not dirs) in the folder given by the instance’s storage path</p>
<p>Returns a generator of BytestreamPath objects corresponding to each source file.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="fontai.io.storage.BytestreamPath.read_bytes">
<span class="sig-name descname"><span class="pre">read_bytes</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; <span class="pre">bytes</span><a class="headerlink" href="#fontai.io.storage.BytestreamPath.read_bytes" title="Permalink to this definition">¶</a></dt>
<dd><p>Reads bystream from the path</p>
<dl class="simple">
<dt>Returns :</dt><dd><p>the file’s bytestream</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="fontai.io.storage.BytestreamPath.write_bytes">
<span class="sig-name descname"><span class="pre">write_bytes</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">content</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">bytes</span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">None</span><a class="headerlink" href="#fontai.io.storage.BytestreamPath.write_bytes" title="Permalink to this definition">¶</a></dt>
<dd><p>Writes bytestream to path</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="fontai.io.storage.GcsBytestreamHandler">
<em class="property"><span class="pre">class</span> </em><span class="sig-name descname"><span class="pre">GcsBytestreamHandler</span></span><a class="headerlink" href="#fontai.io.storage.GcsBytestreamHandler" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#fontai.io.storage.BytestreamHandler" title="fontai.io.storage.BytestreamHandler"><code class="xref py py-class docutils literal notranslate"><span class="pre">fontai.io.storage.BytestreamHandler</span></code></a></p>
<p>Class to interface with Google Cloud Storage.</p>
<dl class="py method">
<dt class="sig sig-object py" id="fontai.io.storage.GcsBytestreamHandler.list_sources">
<span class="sig-name descname"><span class="pre">list_sources</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">url</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><a class="headerlink" href="#fontai.io.storage.GcsBytestreamHandler.list_sources" title="Permalink to this definition">¶</a></dt>
<dd><p>List files in the folder that path points to</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>path</strong> (<em>str</em>) – Target folder</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A generator containing string paths to all sources inside target folder</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="fontai.io.storage.GcsBytestreamHandler.read">
<span class="sig-name descname"><span class="pre">read</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">url</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">bytes</span><a class="headerlink" href="#fontai.io.storage.GcsBytestreamHandler.read" title="Permalink to this definition">¶</a></dt>
<dd><p>Reads the byte contents from a file</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>path</strong> (<em>str</em>) – path to file</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>bytes object</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="fontai.io.storage.GcsBytestreamHandler.write">
<span class="sig-name descname"><span class="pre">write</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">url</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">content</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">bytes</span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">None</span><a class="headerlink" href="#fontai.io.storage.GcsBytestreamHandler.write" title="Permalink to this definition">¶</a></dt>
<dd><p>Writes a bytestream to storage</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>path</strong> (<em>str</em>) – Description</p></li>
<li><p><strong>content</strong> (<em>bytes</em>) – Description</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="fontai.io.storage.LocalBytestreamHandler">
<em class="property"><span class="pre">class</span> </em><span class="sig-name descname"><span class="pre">LocalBytestreamHandler</span></span><a class="headerlink" href="#fontai.io.storage.LocalBytestreamHandler" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#fontai.io.storage.BytestreamHandler" title="fontai.io.storage.BytestreamHandler"><code class="xref py py-class docutils literal notranslate"><span class="pre">fontai.io.storage.BytestreamHandler</span></code></a></p>
<p>Class to interface with local storage</p>
<dl class="py method">
<dt class="sig sig-object py" id="fontai.io.storage.LocalBytestreamHandler.list_sources">
<span class="sig-name descname"><span class="pre">list_sources</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#fontai.io.storage.LocalBytestreamHandler.list_sources" title="Permalink to this definition">¶</a></dt>
<dd><p>List files in the folder that path points to</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>path</strong> (<em>str</em>) – Target folder</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A generator containing string paths to all sources inside target folder</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="fontai.io.storage.LocalBytestreamHandler.read">
<span class="sig-name descname"><span class="pre">read</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">bytes</span><a class="headerlink" href="#fontai.io.storage.LocalBytestreamHandler.read" title="Permalink to this definition">¶</a></dt>
<dd><p>Reads the byte contents from a file</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>path</strong> (<em>str</em>) – path to file</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>bytes object</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="fontai.io.storage.LocalBytestreamHandler.write">
<span class="sig-name descname"><span class="pre">write</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">content</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">bytes</span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">None</span><a class="headerlink" href="#fontai.io.storage.LocalBytestreamHandler.write" title="Permalink to this definition">¶</a></dt>
<dd><p>Writes a bytestream to storage</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>path</strong> (<em>str</em>) – Description</p></li>
<li><p><strong>content</strong> (<em>bytes</em>) – Description</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="fontai.io.storage.UrlBytestreamHandler">
<em class="property"><span class="pre">class</span> </em><span class="sig-name descname"><span class="pre">UrlBytestreamHandler</span></span><a class="headerlink" href="#fontai.io.storage.UrlBytestreamHandler" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#fontai.io.storage.BytestreamHandler" title="fontai.io.storage.BytestreamHandler"><code class="xref py py-class docutils literal notranslate"><span class="pre">fontai.io.storage.BytestreamHandler</span></code></a></p>
<p>Class to download files from URLs</p>
<dl class="py method">
<dt class="sig sig-object py" id="fontai.io.storage.UrlBytestreamHandler.list_sources">
<span class="sig-name descname"><span class="pre">list_sources</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">url</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><a class="headerlink" href="#fontai.io.storage.UrlBytestreamHandler.list_sources" title="Permalink to this definition">¶</a></dt>
<dd><p>List files in the folder that path points to</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>path</strong> (<em>str</em>) – Target folder</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A generator containing string paths to all sources inside target folder</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="fontai.io.storage.UrlBytestreamHandler.read">
<span class="sig-name descname"><span class="pre">read</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">url</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">bytes</span><a class="headerlink" href="#fontai.io.storage.UrlBytestreamHandler.read" title="Permalink to this definition">¶</a></dt>
<dd><p>Reads the byte contents from a file</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>path</strong> (<em>str</em>) – path to file</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>bytes object</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="fontai.io.storage.UrlBytestreamHandler.write">
<span class="sig-name descname"><span class="pre">write</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">url</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">content</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">bytes</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#fontai.io.storage.UrlBytestreamHandler.write" title="Permalink to this definition">¶</a></dt>
<dd><p>Writes a bytestream to storage</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>path</strong> (<em>str</em>) – Description</p></li>
<li><p><strong>content</strong> (<em>bytes</em>) – Description</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-fontai.io.writers">
<span id="fontai-io-writers-module"></span><h2>fontai.io.writers module<a class="headerlink" href="#module-fontai.io.writers" title="Permalink to this headline">¶</a></h2>
<p>This module contains the interfaces between ML pipelines and storage for the purpose of output writing. At the moment only zip files and Tensorflow record output files are supported; as these classes could in principle be used in distributed processing systems, output file names are randomised to avoid collitions to a reasonable degree. The main purpose of these classes is to write a sequence of output files, each with a maximum allowed size.</p>
<dl class="py class">
<dt class="sig sig-object py" id="fontai.io.writers.TfrWriter">
<em class="property"><span class="pre">class</span> </em><span class="sig-name descname"><span class="pre">TfrWriter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">output_path</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_output_file_size</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">float</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">64.0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#fontai.io.writers.TfrWriter" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">fontai.io.writers.BatchWriter</span></code></p>
<p>Takes instances of TfrWritable data classes and writes them to a tensorflow record file according to their schema.schema.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="fontai.io.writers.TfrWriter.file_preffix">
<span class="sig-name descname"><span class="pre">file_preffix</span></span><a class="headerlink" href="#fontai.io.writers.TfrWriter.file_preffix" title="Permalink to this definition">¶</a></dt>
<dd><p>random file preffix to avoid collitions with concurrent writes</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="fontai.io.writers.TfrWriter.obj_size">
<span class="sig-name descname"><span class="pre">obj_size</span></span><a class="headerlink" href="#fontai.io.writers.TfrWriter.obj_size" title="Permalink to this definition">¶</a></dt>
<dd><p>Description</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="fontai.io.writers.TfrWriter.output_path">
<span class="sig-name descname"><span class="pre">output_path</span></span><a class="headerlink" href="#fontai.io.writers.TfrWriter.output_path" title="Permalink to this definition">¶</a></dt>
<dd><p>interface to storage</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#fontai.io.storage.BytestreamPath" title="fontai.io.storage.BytestreamPath">BytestreamPath</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="fontai.io.writers.TfrWriter.shard_id">
<span class="sig-name descname"><span class="pre">shard_id</span></span><a class="headerlink" href="#fontai.io.writers.TfrWriter.shard_id" title="Permalink to this definition">¶</a></dt>
<dd><p>written files counter</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="fontai.io.writers.TfrWriter.shard_size">
<span class="sig-name descname"><span class="pre">shard_size</span></span><a class="headerlink" href="#fontai.io.writers.TfrWriter.shard_size" title="Permalink to this definition">¶</a></dt>
<dd><p>size of current shard</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="fontai.io.writers.TfrWriter.shard_objs">
<span class="sig-name descname"><span class="pre">shard_objs</span></span><a class="headerlink" href="#fontai.io.writers.TfrWriter.shard_objs" title="Permalink to this definition">¶</a></dt>
<dd><p>number of objects in current shard</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="fontai.io.writers.TfrWriter.writer">
<span class="sig-name descname"><span class="pre">writer</span></span><a class="headerlink" href="#fontai.io.writers.TfrWriter.writer" title="Permalink to this definition">¶</a></dt>
<dd><p>writer object</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>tf.io.TFRecordWriter</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="fontai.io.writers.TfrWriter.close">
<span class="sig-name descname"><span class="pre">close</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#fontai.io.writers.TfrWriter.close" title="Permalink to this definition">¶</a></dt>
<dd><p>Close current tfr file</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="fontai.io.writers.TfrWriter.open">
<span class="sig-name descname"><span class="pre">open</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#fontai.io.writers.TfrWriter.open" title="Permalink to this definition">¶</a></dt>
<dd><p>Open new tfr file</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="fontai.io.writers.TfrWriter.shard_name">
<span class="sig-name descname"><span class="pre">shard_name</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#fontai.io.writers.TfrWriter.shard_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the shard name from the file preffix and written shard counter</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="fontai.io.writers.TfrWriter.write">
<span class="sig-name descname"><span class="pre">write</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obj</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="#fontai.io.records.TfrWritable" title="fontai.io.records.TfrWritable"><span class="pre">fontai.io.records.TfrWritable</span></a></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">None</span><a class="headerlink" href="#fontai.io.writers.TfrWriter.write" title="Permalink to this definition">¶</a></dt>
<dd><p>Write tfr-serialisable object to tfr file</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>obj</strong> (<a class="reference internal" href="#fontai.io.records.TfrWritable" title="fontai.io.records.TfrWritable"><em>TfrWritable</em></a>) – object with a defined serialisation schema for tfr files</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="fontai.io.writers.ZipWriter">
<em class="property"><span class="pre">class</span> </em><span class="sig-name descname"><span class="pre">ZipWriter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">output_path</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_output_file_size</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">float</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">128.0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#fontai.io.writers.ZipWriter" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">fontai.io.writers.BatchWriter</span></code></p>
<p>persists a list of files as a sequence of zip files, each with a maximum allowed pre-compression size</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="fontai.io.writers.ZipWriter.bundle">
<span class="sig-name descname"><span class="pre">bundle</span></span><a class="headerlink" href="#fontai.io.writers.ZipWriter.bundle" title="Permalink to this definition">¶</a></dt>
<dd><p>In-memory zip file to be persisted when it’s closed</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#fontai.io.formats.InMemoryZipBundler" title="fontai.io.formats.InMemoryZipBundler">InMemoryZipBundler</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="fontai.io.writers.ZipWriter.shard_id">
<span class="sig-name descname"><span class="pre">shard_id</span></span><a class="headerlink" href="#fontai.io.writers.ZipWriter.shard_id" title="Permalink to this definition">¶</a></dt>
<dd><p>Written files counter</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="fontai.io.writers.ZipWriter.max_output_file_size">
<span class="sig-name descname"><span class="pre">max_output_file_size</span></span><a class="headerlink" href="#fontai.io.writers.ZipWriter.max_output_file_size" title="Permalink to this definition">¶</a></dt>
<dd><p>maximum allowed pre-compression size for individual zip files</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="fontai.io.writers.ZipWriter.output_path">
<span class="sig-name descname"><span class="pre">output_path</span></span><a class="headerlink" href="#fontai.io.writers.ZipWriter.output_path" title="Permalink to this definition">¶</a></dt>
<dd><p>Interface to storage.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#fontai.io.storage.BytestreamPath" title="fontai.io.storage.BytestreamPath">BytestreamPath</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="fontai.io.writers.ZipWriter.close">
<span class="sig-name descname"><span class="pre">close</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#fontai.io.writers.ZipWriter.close" title="Permalink to this definition">¶</a></dt>
<dd><p>COmpress and close zip file</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="fontai.io.writers.ZipWriter.open">
<span class="sig-name descname"><span class="pre">open</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#fontai.io.writers.ZipWriter.open" title="Permalink to this definition">¶</a></dt>
<dd><p>Open new in-memory zip file</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="fontai.io.writers.ZipWriter.shard_name">
<span class="sig-name descname"><span class="pre">shard_name</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#fontai.io.writers.ZipWriter.shard_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the shard name from the file preffix and written shard counter</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="fontai.io.writers.ZipWriter.write">
<span class="sig-name descname"><span class="pre">write</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">file</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="#fontai.io.formats.InMemoryFile" title="fontai.io.formats.InMemoryFile"><span class="pre">fontai.io.formats.InMemoryFile</span></a></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">None</span><a class="headerlink" href="#fontai.io.writers.ZipWriter.write" title="Permalink to this definition">¶</a></dt>
<dd><p>Add file to the zip file’s in-memory buffer</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>file</strong> (<a class="reference internal" href="#fontai.io.formats.InMemoryFile" title="fontai.io.formats.InMemoryFile"><em>InMemoryFile</em></a>) – File object</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-fontai.io">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-fontai.io" title="Permalink to this headline">¶</a></h2>
<p>This module contains classes that form the data interfaces between ML stages and the outside world (read: storage and other ML stages). Most objects are meant to be used internally by other package modules. Submodules are:</p>
<p>formats: allowed file format classes; these classes allow to deserialise objects into concrete file formats such as zip and ttf files.</p>
<p>readers: Batch file readers; each ML stage imposes restrictions on the kind of file that can be read as input, using classes in this module</p>
<p>scrappers: Scrapper classes to retrieve open source font files using the Ingestion stage.</p>
<p>storage: Implements ain abstraction that allows to read files from local and remote storage. At the moment, only GCS and public URLs are supported for remote storage.</p>
<p>writers: Batch file writers</p>
</div>
</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">textfont-ai</a></h1>








<h3>Navigation</h3>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2021, Nestor Sanchez.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 4.0.2</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="_sources/fontai.io.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>